{
    "$schema":"http://json-schema.org/draft-07/schema",
    "title": "Review schema",
    "description": "A Json schema for the film review",

    "type":"object",
    "properties": {
        "filmId":{
            "description": "The id of the film",
            "type":"integer"
        },
        "reviewId":{
            "description": "The id of the review",
            "type":"integer"
        },
        "completed":{
            "description": "A boolean field that mark if the review is complete",
            "type":"boolean",
            "default":false
        },
        "reviewDate":{
            "description": "The date when the review as been completed",
            "type":"string",
            "format": "date"
        },
        "rating":{
            "description": "The rating of the review",
            "type":"integer",
            "minimum": 1,
            "maximum": 10
        },
        "review":{
            "description": "The textual review",
            "type":"string",
            "maxLength": 1000
        }
    },
    "required": ["filmId","reviewId","completed"],
    "dependencies": {
        "completed":{
            "oneOf": 
            [
                {
                    "properties": {
                        "completed":{
                            "const":false
                        }
                    },
                    "allOf": [
                        {
                            "not": {
                                "required": ["reviewDate"]
                            }
                        },
                        {
                            "not":{
                                "required": ["rating"]
                            }
                        },
                        {
                            "not":{
                                "required": ["review"]
                            }
                        }
            ]
                },
                {
                    "properties": {
                        "completed":{
                            "const":true
                        }
                    },
                    "required": ["reviewDate","rating","review"]
                }
            ]
        }
    }
}